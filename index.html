<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Savings Plan</title>

  <style>
    :root {
      --bg:#0f172a;
      --card:#020617;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --accent:#22c55e;
      --warn:#facc15;
    }
    body.light {
      --bg:#f8fafc;
      --card:#ffffff;
      --text:#020617;
      --muted:#475569;
    }
    body {
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
      background:var(--bg);
      color:var(--text);
      padding:16px;
    }
    h1,h2{margin-top:0}
    .card{
      background:var(--card);
      border-radius:14px;
      padding:16px;
      margin-bottom:16px;
      box-shadow:0 8px 20px rgba(0,0,0,.25);
    }
    .accent{color:var(--accent);font-weight:600}
    .muted{color:var(--muted);font-size:13px}
    input[type="number"]{
      width:100%;
      padding:6px;
      border-radius:6px;
      border:1px solid #64748b;
      margin-bottom:6px;
    }
    progress{width:100%;height:18px}
    button{
      width:100%;
      padding:8px;
      border-radius:8px;
      border:none;
      background:var(--warn);
      font-weight:600;
      margin-top:8px;
    }
    .toggle{float:right}
  </style>
</head>

<body>

<button class="toggle" onclick="toggleMode()">üåó</button>

<h1>üá®üá¶ Savings Plan</h1>
<p class="muted">One-tap reminder of your financial system</p>

<!-- SAVINGS -->
<div class="card">
  <h2>üéØ Savings Goal</h2>
  <label>Current Savings (MYR)</label>
  <input type="number" id="savings" oninput="updateSavings()">
  <progress id="savingsBar" max="24710"></progress>
  <p class="accent" id="savingsText">0 / 24,710 MYR</p>
</div>

<!-- CREDIT CARD -->
<div class="card">
  <h2>üí≥ Credit Card Payoff (Auto-Interest)</h2>

  <label>Total Credit Card Balance (PHP)</label>
  <input type="number" id="ccTotal" value="106704.61">

  <label>Remaining Balance (PHP)</label>
  <input type="number" id="ccRemaining">

  <label>Monthly Interest Rate (%)</label>
  <input type="number" id="ccInterest" value="2.9" step="0.01">

  <label>Monthly Payment (PHP)</label>
  <input type="number" id="ccPayment" value="20527">

  <button onclick="runMonthlyCycle()">Run Monthly Cycle</button>

  <progress id="ccBar"></progress>
  <p class="accent" id="ccProgressText">0% paid</p>
  <p class="muted" id="ccMonthsLeft"></p>

  <a href="debt-guide.html" class="muted">üìò View Projected Payoff Guide ‚Üí</a>
</div>

<div class="card">
  <p class="accent">Progress beats perfection.</p>
</div>

<script>
  function updateSavings(){
    const v=+savings.value||0;
    savingsBar.value=v;
    savingsText.innerText=`${v} / 24,710 MYR`;
    localStorage.setItem('savings',v);
  }

  function updateCC(){
    const total=+ccTotal.value||0;
    const remaining=+ccRemaining.value||0;
    const paid=Math.max(total-remaining,0);
    const percent=total?(paid/total)*100:0;

    ccBar.max=total;
    ccBar.value=paid;

    ccProgressText.innerText=
      `${percent.toFixed(1)}% paid (${paid.toLocaleString()} / ${total.toLocaleString()} PHP)`;

    if(ccPayment.value>0 && remaining>0){
      ccMonthsLeft.innerText=
        `‚è≥ Approx. ${Math.ceil(remaining/ccPayment.value)} months left`;
    }else if(remaining===0){
      ccMonthsLeft.innerText=`üéâ Debt-free`;
    }

    localStorage.setItem('ccRemaining',remaining);
  }

  function runMonthlyCycle(){
    let balance=+ccRemaining.value||0;
    const interestRate=(+ccInterest.value||0)/100;
    const payment=+ccPayment.value||0;

    // 1Ô∏è‚É£ apply interest
    const interest=balance*interestRate;
    balance+=interest;

    // 2Ô∏è‚É£ apply payment
    balance=Math.max(balance-payment,0);

    ccRemaining.value=balance.toFixed(2);
    updateCC();
  }

  function toggleMode(){
    document.body.classList.toggle('light');
    localStorage.setItem('mode',document.body.className);
  }

  if(localStorage.getItem('savings')){
    savings.value=localStorage.getItem('savings');
    updateSavings();
  }
  if(localStorage.getItem('ccRemaining')){
    ccRemaining.value=localStorage.getItem('ccRemaining');
    updateCC();
  }
  if(localStorage.getItem('mode')){
    document.body.className=localStorage.getItem('mode');
  }
</script>

</body>
</html>
