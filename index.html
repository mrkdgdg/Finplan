<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Savings Plan</title>
  <style>
    :root {
      --bg: #0f172a;
      --card: #020617;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --accent: #22c55e;
      --warn: #facc15;
    }
    body.light {
      --bg: #f8fafc;
      --card: #ffffff;
      --text: #020617;
      --muted: #475569;
    }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      padding: 16px;
    }
    h1,h2 { margin-top: 0 }
    .card {
      background: var(--card);
      border-radius: 14px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,.25);
    }
    table { width:100%; border-collapse:collapse; }
    td,th { padding:8px; border-bottom:1px solid #334155; font-size:14px }
    th { text-align:left }
    .accent { color: var(--accent); font-weight:600 }
    .muted { color: var(--muted); font-size:13px }
    .toggle { float:right }
    input[type="number"] { width:100%; padding:6px; border-radius:6px; border:1px solid #64748b }
    progress { width:100%; height:18px }
    .affirmation { font-size:15px; margin-top:8px }
    .countdown { background: rgba(34, 197, 94, 0.1); border: 1px dashed var(--accent); padding: 10px; border-radius: 8px; text-align: center; margin-top: 10px; }
  </style>
</head>
<body>

<button class="toggle" onclick="toggleMode()">ðŸŒ— Toggle</button>
<h1>ðŸ‡¨ðŸ‡¦ Canada Migration Plan</h1>
<p class="muted">Oneâ€‘tap reminder of your financial system</p>

<div class="card">
  <h2>ðŸŽ¯ Goal Tracker</h2>
  <label>Current Savings (MYR)</label>
  <input type="number" id="savings" placeholder="Enter current savings" oninput="updateProgress()">
  <progress id="bar" value="0" max="24710"></progress>
  <p class="accent" id="progressText">0 / 24,710 MYR</p>
</div>

<div class="card">
  <h2>ðŸ“… Monthly Checkâ€‘in</h2>
  <label><input type="checkbox" id="checkin"> Did I follow the plan this month?</label>
  <p class="affirmation" id="affirmation"></p>
</div>

<div class="card">
  <h2>ðŸ’¼ Monthly Snapshot</h2>
  <table>
    <tr><th>Salary</th><td contenteditable>4000</td></tr>
    <tr><th>Living Expenses</th><td contenteditable>1130</td></tr>
    <tr><th>iPhone (until Aug 2026)</th><td contenteditable>478</td></tr>
    <tr><th>Credit Card (until May)</th><td contenteditable>1368</td></tr>
    <tr><th>Available Cash</th><td class="accent">1024</td></tr>
  </table>
  <div class="countdown">
    <span id="debtCountdown" style="font-weight: bold; color: var(--accent);"></span>
  </div>
  <p class="muted">Tap any number to edit (autoâ€‘saved locally)</p>
</div>

<div class="card">
  <h2>ðŸ§  Reminder</h2>
  <p class="accent">Progress beats perfection.</p>
</div>

<script>
  const affirmations = [
    "You are building something real. Stay steady.",
    "One month of discipline beats years of regret.",
    "Debt freedom is close. Don't quit now.",
    "Future you is counting on today you."
  ];

  function updateProgress() {
    const val = Number(document.getElementById('savings').value || 0);
    document.getElementById('bar').value = val;
    document.getElementById('progressText').innerText = `${val} / 24,710 MYR`;
    localStorage.setItem('savings', val);
  }

  function toggleMode() {
    document.body.classList.toggle('light');
    localStorage.setItem('mode', document.body.className);
  }

  function updateCountdown() {
    const targetDate = new Date(2026, 4, 1); // May 2026 (Month is 0-indexed)
    const now = new Date();
    const diffTime = targetDate - now;
    const diffMonths = Math.ceil(diffTime / (1000 * 60 * 60 * 24 * 30.44));
    
    const element = document.getElementById('debtCountdown');
    if (diffMonths > 0) {
      element.innerText = `â³ ${diffMonths} months until Credit Card is paid off!`;
    } else {
      element.innerText = `ðŸŽ‰ Credit Card Debt Cleared!`;
    }
  }

  document.getElementById('checkin').addEventListener('change', e => {
    if (!e.target.checked) {
      document.getElementById('affirmation').innerText = affirmations[Math.floor(Math.random()*affirmations.length)];
    } else {
      document.getElementById('affirmation').innerText = "Good job. Stay consistent.";
    }
    localStorage.setItem('checkin', e.target.checked);
  });

  // restore state
  if (localStorage.getItem('savings')) document.getElementById('savings').value = localStorage.getItem('savings'), updateProgress();
  if (localStorage.getItem('mode')) document.body.className = localStorage.getItem('mode');
  if (localStorage.getItem('checkin') === 'true') document.getElementById('checkin').checked = true;
  
  updateCountdown();
</script>

</body>
</html>
